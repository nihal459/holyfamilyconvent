{% extends 'base.html' %}
{% block content %}
{% load static %}

<style>
    .card-hover {
        transition: transform 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .card-hover:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }
    .news-title {
        text-decoration: underline;
        margin-bottom: 1.5rem;
    }
    .announcement-list {
        list-style-type: disc;
        padding-left: 20px;
    }
    .announcement-list li a {
        color: #333;
        text-decoration: none;
        font-weight: bold;
    }
    .announcement-list li a:hover {
        color: #007bff;
    }
    .ad-image {
        width: 100%;
        height: 581px;
        object-fit: cover;
    }
    .carousel-inner {
        height: 100%;
    }
    .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .hover-btn-new.orange {
        display: inline-block;
        padding: 10px 20px;
        background: #f28c38;
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
        transition: background 0.3s;
    }
    .hover-btn-new.orange:hover {
        background: #e07b30;
    }
    .modal-content {
        background: transparent;
        border: none;
    }
    .modal-body {
        padding: 0;
        position: relative;
    }
    .modal-body .close {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 30px;
        color: #fff;
        opacity: 0.8;
        z-index: 1000;
    }
    .modal-body img {
        width: 100%;
        height: auto;
        max-height: 80vh;
        object-fit: contain;
    }
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .carousel-item img {
            height: 300px;
        }
        .card-hover {
            min-height: 450px !important;
            max-height: 450px !important;
        }
        .ad-image {
            height: 300px;
        }
    }
    @media (max-width: 576px) {
        .carousel-item img {
            height: 300px;
        }
        .card-hover {
            min-height: 450px !important;
            max-height: 450px !important;
        }
        .ad-image {
            height: 300px;
        }
    }
    /* CSS to center ad modal on mobile */
    @media (max-width: 768px) {
        .modal-dialog {
            display: flex;
            align-items: center;
            min-height: calc(100vh - 60px); /* Adjust for header/footer if present */
            margin: 0 auto;
        }
    }
    /* CSS to center gallery modal on mobile */
    @media (max-width: 768px) {
        #imageModal .modal-dialog {
            display: flex;
            align-items: center;
            min-height: calc(100vh - 60px); /* Adjust for header/footer if present */
            margin: 0 auto;
        }
    }
    /* Updated CSS to reduce space in gallery section on mobile */
    @media (max-width: 768px) {
        #gallery .section-title {
            margin-bottom: 5px; /* Reduced from 10px to 5px */
        }
        #gallery #galleryCarousel {
            margin-bottom: 5px; /* Reduced from 10px to 5px */
        }
        #gallery .text-center.mt-4 {
            margin-top: 5px; /* Reduced from 10px to 5px */
        }
    }
</style>

<div id="carouselExampleControls" class="carousel slide bs-slider box-slider" data-ride="carousel" data-pause="hover" data-interval="false">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleControls" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleControls" data-slide-to="1"></li>
        <li data-target="#carouselExampleControls" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active">
            <div id="home" class="first-section" style="background-image:url('{% static 'images/school/bannermain.png' %}'); background-size: fill; background-position: center; background-repeat: no-repeat;">
                <div class="dtab">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 text-center">
                                <div class="big-tagline">
                                    <h2 style="margin-bottom:40px;"><strong>Holy Family Convent</strong> School</h2>
                                    <p class="lead">Educating the mind without educating the heart is no education at all</p>
                                    <a href="{% url 'view_contact' %}" class="hover-btn-new"><span>Contact Us</span></a>
                                </div>
                            </div>
                        </div><!-- end row -->            
                    </div><!-- end container -->
                </div>
            </div><!-- end section -->
        </div>
        <div class="carousel-item">
            <div id="home" class="first-section" style="background-image:url('{% static 'images/school/banner3.jpeg' %}');">
                <div class="dtab">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 text-center">
                                <div class="big-tagline">
                                    <h2 data-animation="animated zoomInRight" style="margin-bottom:40px;">Holy Family Convent <strong> School</strong></h2>
                                    <p class="lead" data-animation="animated fadeInLeft">Learning today, leading tomorrow</p>
                                    <a href="{% url 'view_contact' %}" class="hover-btn-new"><span>Contact Us</span></a>
                                </div>
                            </div>
                        </div><!-- end row -->            
                    </div><!-- end container -->
                </div>
            </div><!-- end section -->
        </div>
        <div class="carousel-item">
            <div id="home" class="first-section" style="background-image:url('{% static 'images/school/bb.jpeg' %}');">
                <div class="dtab">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 text-center">
                                <div class="big-tagline">
                                    <h2 data-animation="animated zoomInRight" style="margin-bottom:40px;"><strong>Holy Family Convent</strong> School</h2>
                                    <p class="lead" data-animation="animated fadeInLeft">With Godâ€™s grace, every child can shine</p>
                                    <a href="{% url 'view_contact' %}" class="hover-btn-new"><span>Contact Us</span></a>
                                </div>
                            </div>
                        </div><!-- end row -->            
                    </div><!-- end container -->
                </div>
            </div><!-- end section -->
        </div>
        <!-- Left Control -->
        <a class="new-effect carousel-control-prev main-carousel" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="fa fa-angle-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <!-- Right Control -->
        <a class="new-effect carousel-control-next main-carousel" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="fa fa-angle-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<div class="container my-5">
    <div class="row">
        <!-- News and Announcements Section -->
        <div class="col-lg-6 col-md-12 mb-4">
            <div class="card card-hover p-4" style="min-height:668px; max-height:668px;">
                <h3 class="news-title">News and Announcements</h3>
                <ul class="announcement-list">
                    {% for news in latest_news %}
                    <li>
                        <a href="">{{ news.title }}</a>
                    </li>
                    {% endfor %}
                </ul>
                <div class="text-center mt-4">
                    <a href="{% url 'view_announcements' %}" class="btn btn-primary">View More</a>
                </div>
            </div>
        </div>

        <!-- Advertisement Section with Carousel -->
        <div class="col-lg-6 col-md-12 mb-4">
            <div class="card card-hover p-4" style="max-height:668px; min-height:668px;">
                <h3 class="news-title">Advertisement</h3>
                {% if banner %}
                <div id="adCarousel" class="carousel slide" data-ride="carousel" data-interval="2500">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        {% if banner.image1 %}
                        <li data-target="#adCarousel" data-slide-to="0" class="active"></li>
                        {% endif %}
                        {% if banner.image2 %}
                        <li data-target="#adCarousel" data-slide-to="1"></li>
                        {% endif %}
                        {% if banner.image3 %}
                        <li data-target="#adCarousel" data-slide-to="2"></li>
                        {% endif %}
                    </ol>

                    <!-- Slides -->
                    <div class="carousel-inner">
                        {% if banner.image1 %}
                        <div class="carousel-item active">
                            <img src="{{ banner.image1.url }}" class="d-block w-100 ad-image" alt="Ad 1" data-toggle="modal" data-target="#adModal" data-img-src="{{ banner.image1.url }}" style="max-height: 550px;">
                        </div>
                        {% endif %}
                        {% if banner.image2 %}
                        <div class="carousel-item">
                            <img src="{{ banner.image2.url }}" class="d-block w-100 ad-image" alt="Ad 2" data-toggle="modal" data-target="#adModal" data-img-src="{{ banner.image2.url }}" style="max-height: 550px;">
                        </div>
                        {% endif %}
                        {% if banner.image3 %}
                        <div class="carousel-item">
                            <img src="{{ banner.image3.url }}" class="d-block w-100 ad-image" alt="Ad 3" data-toggle="modal" data-target="#adModal" data-img-src="{{ banner.image3.url }}" style="max-height: 550px;">
                        </div>
                        {% endif %}
                    </div>

                    <!-- Optional Controls (Previous/Next arrows) -->
                    <a class="carousel-control-prev" href="#adCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#adCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Modal for enlarged ad images -->
    <div class="modal fade" id="adModal" tabindex="-1" role="dialog" aria-labelledby="adModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg d-flex justify-content-center align-items-center">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <div id="adModalCarousel" class="carousel slide" data-interval="false">
                        <div class="carousel-inner">
                            {% if banner.image1 %}
                            <div class="carousel-item active">
                                <img src="{{ banner.image1.url }}" class="d-block w-100" alt="Ad 1">
                            </div>
                            {% endif %}
                            {% if banner.image2 %}
                            <div class="carousel-item">
                                <img src="{{ banner.image2.url }}" class="d-block w-100" alt="Ad 2">
                            </div>
                            {% endif %}
                            {% if banner.image3 %}
                            <div class="carousel-item">
                                <img src="{{ banner.image3.url }}" class="d-block w-100" alt="Ad 3">
                            </div>
                            {% endif %}
                        </div>
                        <!-- Modal carousel controls -->
                        <a class="carousel-control-prev" href="#adModalCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon bg-dark" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#adModalCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon bg-dark" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for dynamic ad modal carousel -->
<script>
    $(document).ready(function() {
        $('#adCarousel .carousel-item img').click(function() {
            var index = $(this).parent().index();
            $('#adModalCarousel .carousel-item').removeClass('active');
            $('#adModalCarousel .carousel-item').eq(index).addClass('active');
        });
    });
</script>

<div id="overviews" class="section wb" style="margin-top:-40px;">
    <div class="container">
        <div class="section-title row text-center">
            <div class="col-md-8 offset-md-2">
                <h3>About Holy Family Convent School</h3>
                <p class="lead">Located at Mirpur Ram, Nagri Parole, Near Tehsildar Office, District Kathua, 184151, our school blends Christian values with the cultural richness of Jammu to nurture young minds in a serene educational environment.</p>
            </div>
        </div><!-- end title -->
    
        <div class="row align-items-center">
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                <div class="message-box">
                    <h4>A Commitment to Excellence</h4>
                    <h2>Welcome to Holy Family Convent School</h2>
                    <p>Established by the Diocese of Jammu-Srinagar Education Society, we are dedicated to providing a nurturing environment that fosters academic excellence, creativity, and personal growth. Our dedicated team of teachers and staff work tirelessly to empower students to become confident, compassionate, and responsible individuals.</p>
                    <p>Our mission is to inspire a love for learning, promote critical thinking, and develop essential life skills through a well-rounded education encompassing academics, sports, arts, and co-curricular activities.</p>
                    <a href="{% url 'aboutus' %}" class="hover-btn-new orange"><span>Learn More</span></a>
                </div><!-- end messagebox -->
            </div><!-- end col -->
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                <div class="post-media wow fadeIn">
                    <img src="{% static 'images/school/abt1.png' %}" alt="Holy Family Convent School Campus" class="img-fluid img-rounded">
                </div><!-- end media -->
            </div><!-- end col -->
        </div>
        <div class="row align-items-center">
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                <div class="post-media wow fadeIn">
                    <img src="{% static 'images/school/abt3.jpg' %}" alt="Students at Holy Family Convent School" class="img-fluid img-rounded">
                </div><!-- end media -->
            </div><!-- end col -->
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                <div class="message-box">
                    <h2>A Message from Our Principal</h2>
                    <p>Dear parents and students, welcome to our school's website! As Principal, I am delighted to share our vision, mission, and values. We remain committed to our core values of integrity, respect, and inclusivity, creating a safe, supportive environment where every student can thrive and reach their full potential. - Fr. Bijo Matthew</p>
                    <p>We aim to develop capable, curious, and creative thinkers equipped to face the challenges of an ever-changing world, guided by Christian principles.</p>
                    <a href="{% url 'aboutus' %}" class="hover-btn-new orange"><span>Learn More</span></a>
                </div><!-- end messagebox -->
            </div><!-- end col -->
        </div><!-- end row -->
    </div><!-- end container -->
</div><!-- end section -->

<section class="section lb page-section">
    <div class="container">

        <div class="timeline">
            <div class="timeline__wrap">
                <div class="timeline__items">
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Laughter echoes, swings sway, and memories are made in our Children's Park.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-02" style="background: url('{% static 'images/img-02.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Where innocence meets joy, and childhood magic unfolds, our park is a haven for young souls.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-03" style="background: url('{% static 'images/img-03.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>The well-furnished stage shines bright, a canvas for creativity and dreams.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>With every prop and every light, the stage comes alive, a world of stories to ignite.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-01" style="background: url('{% static 'images/img-01.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>The Activity Hall is where creativity meets enthusiasm, fostering a sense of community.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-02" style="background: url('{% static 'images/img-02.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>From performances to exhibitions, the Activity Hall is the heartbeat of our school.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-03" style="background: url('{% static 'images/img-03.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Our school's swimming class provides a fun and safe environment for students to learn new skills.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Through swimming, students develop physical fitness, confidence, and teamwork skills.</p>
                        </div>
                    </div>

                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Our karate classes promote discipline, focus, and self-defense skills in a supportive environment.</p>
                        </div>
                    </div>

                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Students learn karate techniques, build confidence, and develop physical fitness through our expert-led classes.</p>
                        </div>
                    </div>

                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Our dedicated team of educators and staff are committed to providing a nurturing environment for students to thrive.</p>
                        </div>
                    </div>

                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>With passionate and experienced staff, we strive to deliver exceptional education and care for our students.</p>
                        </div>
                    </div>

                    
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Our library is a hub of knowledge, offering a vast collection of books, resources, and quiet spaces for study and research.</p>
                        </div>
                    </div>

                    
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>Our state-of-the-art computer lab is equipped with the latest technology to enhance learning and innovation.</p>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__content img-bg-04" style="background: url('{% static 'images/img-04.jpg' %}') no-repeat center; background-size: cover; position: relative; padding: 20px; color: #fff;">
                            <h2></h2>
                            <p>With modern infrastructure and cutting-edge tools, our computer lab provides an ideal environment for students to explore and develop their skills.</p>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</section>

<div class="section cl">
    <div class="container">
        <div class="row text-left stat-wrap">
            <div class="col-md-4 col-sm-4 col-xs-12">
                <span data-scroll class="global-radius icon_wrap effect-1 alignleft"><i class="flaticon-study"></i></span>
                <p class="stat_count">5000</p>
                <h3>Students</h3>
            </div><!-- end col -->

            <div class="col-md-4 col-sm-4 col-xs-12">
                <span data-scroll class="global-radius icon_wrap effect-1 alignleft"><i class="flaticon-online"></i></span>
                <p class="stat_count">50</p>
                <h3>Teachers</h3>
            </div><!-- end col -->

            <div class="col-md-4 col-sm-4 col-xs-12">
                <span data-scroll class="global-radius icon_wrap effect-1 alignleft"><i class="flaticon-years"></i></span>
                <p class="stat_count">25</p>
                <h3>Years Completed</h3>
            </div><!-- end col -->
        </div><!-- end row -->
    </div><!-- end container -->
</div><!-- end section -->

<div id="gallery" class="section lb">
    <div class="container">
        <div class="section-title text-center">
            <h3>Our Gallery</h3>
            <p>Explore our collection of stunning images showcasing our work and achievements.</p>
        </div>

        <!-- Carousel -->
        {% if gallery_items %}
        <div id="galleryCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                {% for item in gallery_items %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <img src="{{ item.image.url }}" class="d-block w-80" alt="{{ item.title }}"
                         data-toggle="modal" data-target="#imageModal" data-img-src="{{ item.image.url }}" style="height:500px; object-fit:contain;">
                </div>
                {% endfor %}
            </div>

            <a class="carousel-control-prev" href="#galleryCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon bg-dark" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#galleryCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon bg-dark" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'view_gallery' %}" class="hover-btn-new orange"><span>View More</span></a>
        </div>
        {% endif %}

        <!-- Modal for enlarged images -->
        <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg d-flex justify-content-center align-items-center">
                <div class="modal-content">
                    <div class="modal-body">
                        <div id="modalCarousel" class="carousel slide" data-interval="false">
                            <div class="carousel-inner">
                                <!-- Modal items populated dynamically -->
                            </div>
                            <a class="carousel-control-prev" href="#modalCarousel" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#modalCarousel" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                                style="position:absolute;top:10px;right:15px;"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for dynamic modal carousel -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const galleryItems = document.querySelectorAll('#galleryCarousel .carousel-item img');
        const modalInner = document.querySelector('#modalCarousel .carousel-inner');

        // Populate modal items
        modalInner.innerHTML = '';
        galleryItems.forEach((img, index) => {
            const src = img.getAttribute('data-img-src');
            const alt = img.getAttribute('alt');
            const isActive = index === 0 ? 'active' : '';
            modalInner.innerHTML += `
                <div class="carousel-item ${isActive}">
                    <img src="${src}" class="d-block w-100" alt="${alt}">
                </div>
            `;
        });

        // Update active image in modal when one is clicked
        galleryItems.forEach((img, index) => {
            img.addEventListener('click', () => {
                const items = document.querySelectorAll('#modalCarousel .carousel-item');
                items.forEach(item => item.classList.remove('active'));
                if (items[index]) {
                    items[index].classList.add('active');
                }
            });
        });
    });
</script>

{% endblock %}